window.cityMap = {
  "کل کشور": ["ایران"],

  "آذربایجان شرقی": [
    "تبریز","مراغه","مرند","اهر","شبستر","جلفا","سراب","میانه","هشترود","ملکان",
    "بستان‌آباد","عجب‌شیر","آذرشهر","اسکو","ورزقان","کلیبر","خداآفرین","چاراویماق","بناب","هریس"
  ],
  "آذربایجان غربی": [
    "ارومیه","خوی","بوکان","مهاباد","میاندوآب","سلماس","پیرانشهر","شاهین‌دژ","سردشت",
    "نقده","اشنویه","ماکو","شوط","پلدشت","چالدران","چایپاره","تکاب"
  ],
  "اردبیل": [
    "اردبیل","مشگین‌شهر","خلخال","پارس‌آباد","بیله‌سوار","گرمی","نمین","نیر","کوثر","سرعین"
  ],
  "زنجان": [
    "زنجان","ابهر","خدابنده","خرمدره","طارم","ایجرود","ماهنشان","سلطانیه"
  ],
  "گیلان": [
    "رشت","لاهیجان","انزلی","رودسر","آستارا","تالش","صومعه‌سرا","فومن","شفت","ماسال",
    "رضوانشهر","املش","سیاهکل","آستانه اشرفیه"
  ],
  "مازندران": [
    "ساری","بابل","آمل","تنکابن","نوشهر","چالوس","بابلسر","قائم‌شهر","بهشهر","جویبار",
    "محمودآباد","فریدونکنار","نور","نکا","کلاردشت","سیمرغ","گلوگاه","رامسر"
  ],
  "گلستان": [
    "گرگان","گنبد کاووس","علی‌آباد","آزادشهر","مینودشت","کلاله","مراوه‌تپه","رامیان",
    "آق‌قلا","ترکمن","گمیشان","کردکوی","بندرگز"
  ],
    "تهران": [
    "تهران","ری","اسلام‌شهر","ورامین","دماوند","پردیس","شهریار","ملارد","قدس","بهارستان",
    "پاکدشت","قرچک","فیروزکوه"
  ],
  "البرز": ["کرج","نظرآباد","طالقان","اشتهارد","فردیس","ساوجبلاغ"],
  "قم": ["قم"],
  "قزوین": ["قزوین","تاکستان","آبیک","بوئین‌زهرا","البرز (قزوین)","آوج"],
  "سمنان": ["سمنان","شاهرود","دامغان","گرمسار","مهدی‌شهر","میامی","آرادان"],
  "مرکزی": ["اراک","ساوه","خمین","محلات","شازند","دلیجان","کمیجان","خنداب","فراهان","آشتیان"],
  "اصفهان": [
    "اصفهان","کاشان","خمینی‌شهر","نجف‌آباد","فلاورجان","شاهین‌شهر","لنجان","مبارکه","فریدن",
    "فریدون‌شهر","نایین","نطنز","خور و بیابانک","اردستان","سمیرم","چادگان","برخوار","تیران و کرون","گلپایگان","خوانسار"
  ],
  "همدان": ["همدان","ملایر","نهاوند","تویسرکان","کبودرآهنگ","رزن","اسدآباد","فامنین"],
  "کردستان": ["سنندج","سقز","بانه","مریوان","بیجار","قروه","دیواندره","کامیاران","دهگلان"],
  "کرمانشاه": [
    "کرمانشاه","اسلام‌آباد غرب","هرسین","کنگاور","سنقر","صحنه","پاوه","جوانرود","سرپل ذهاب","گیلانغرب","ثلاث باباجانی"
  ],
  "لرستان": ["خرم‌آباد","بروجرد","دورود","الیگودرز","کوهدشت","نورآباد","ازنا","پلدختر","الشتر"],
  "ایلام": ["ایلام","دهلران","مهران","آبدانان","دره‌شهر","چرداول","ملکشاهی","سیروان"],
  "خوزستان": [
    "اهواز","آبادان","خرمشهر","دزفول","شوش","شوشتر","اندیمشک","ایذه","باغ‌ملک","بهبهان",
    "ماهشهر","رامهرمز","رامشیر","امیدیه","هندیجان","لالی","گتوند","کارون","حمیدیه","باوی","اندیکا"
  ],
    "فارس": [
    "آباده","ارسنجان","استهبان","اقلید","اوز","بختگان","بوانات","بیضا","پاسارگاد","جویم",
    "جهرم","خرامه","خرم‌بید","خفر","خنج","داراب","رستم","زرقان","زرین‌دشت","سپیدان",
    "سرچهان","سروستان","شیراز","فراشبند","فسا","فیروزآباد","قیر و کارزین","کازرون","کوار",
    "کوه‌چنار","گراش","لارستان","لامرد","مرودشت","ممسنی","مهر","نی‌ریز"
  ],
  "بوشهر": [
    "بوشهر","کنگان","دیر","جم","دشتستان","دشتی","گناوه","تنگستان","عسلویه"
  ],
  "هرمزگان": [
    "بندرعباس","قشم","میناب","بستک","حاجی‌آباد","رودان","جاسک","سیریک","پارسیان","بندر لنگه","خمیر"
  ],
  "کهگیلویه و بویراحمد": [
    "یاسوج","دهدشت","گچساران","باشت","لنده","چرام","بهمئی"
  ],
  "چهارمحال و بختیاری": [
    "شهرکرد","بروجن","فارسان","اردل","لردگان","کوهرنگ","کیار","سامان"
  ],
  "کرمان": [
    "کرمان","رفسنجان","سیرجان","جیرفت","بم","زرند","کهنوج","بردسیر","راور","عنبرآباد",
    "فهرج","ریگان","منوجان","قلعه‌گنج","شهربابک","انار","ارزوئیه","رودبار جنوب"
  ],
  "خراسان رضوی": [
    "مشهد","نیشابور","سبزوار","تربت حیدریه","تربت جام","کاشمر","قوچان","چناران","سرخس",
    "خواف","درگز","بردسکن","فریمان","طرقبه شاندیز","جوین","جغتای","خلیل‌آباد","کلات",
    "باخرز","زاوه","رشتخوار"
  ],
  "خراسان شمالی": [
    "بجنورد","شیروان","اسفراین","مانه و سملقان","جاجرم","گرمه","راز و جرگلان"
  ],
  "خراسان جنوبی": [
    "بیرجند","قائنات","فردوس","نهبندان","سربیشه","خوسف","بشرویه","سرایان","زیرکوه"
  ],
  "سیستان و بلوچستان": [
    "زاهدان","چابهار","ایرانشهر","خاش","سراوان","زابل","کنارک","نیک‌شهر","دلگان","مهرستان",
    "سیب و سوران","فنوج","قصرقند","هیرمند","زهک","میرجاوه","نیمروز","گلشن"
  ],
  "یزد": [
    "یزد","میبد","اردکان","مهریز","ابرکوه","بافق","تفت","اشکذر","خاتم","بهاباد","مروست","زارچ"
  ]
};


// 📌 پر کردن کشویی استان و شهر
document.addEventListener("DOMContentLoaded", () => {
  const provinceSelect = document.getElementById("province");
  const citySelect = document.getElementById("city");

  if (!provinceSelect || !citySelect) {
    console.error("❌ province یا city select پیدا نشد");
    return;
  }
  if (!window.cityMap || typeof window.cityMap !== "object") {
    console.error("❌ cityMap تعریف نشده یا معتبر نیست");
    return;
  }

  // پر کردن استان‌ها
  provinceSelect.innerHTML = `<option value="" disabled selected>انتخاب استان</option>`;
  Object.keys(window.cityMap).forEach(province => {
    provinceSelect.add(new Option(province, province));
  });

  // در ابتدا شهرها غیرفعال باشند
  citySelect.disabled = true;

  // تغییر استان → پر کردن شهرها
  provinceSelect.addEventListener("change", () => {
    const selectedProvince = provinceSelect.value;
    const cities = window.cityMap[selectedProvince] || [];

    citySelect.innerHTML = `<option value="" disabled selected>انتخاب شهر</option>`;

    if (cities.length > 0) {
      cities.forEach(city => citySelect.add(new Option(city, city)));
      citySelect.disabled = false;
    } else {
      citySelect.add(new Option("شهری موجود نیست", ""));
      citySelect.disabled = true;
    }
  });
});